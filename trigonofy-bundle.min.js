var hs=Object.create;var jn=Object.defineProperty;var ds=Object.getOwnPropertyDescriptor;var vs=Object.getOwnPropertyNames;var bs=Object.getPrototypeOf,gs=Object.prototype.hasOwnProperty;var ps=p=>jn(p,"__esModule",{value:!0});var ms=(p,r)=>()=>(r||p((r={exports:{}}).exports,r),r.exports);var _s=(p,r,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let i of vs(r))!gs.call(p,i)&&i!=="default"&&jn(p,i,{get:()=>r[i],enumerable:!(a=ds(r,i))||a.enumerable});return p},wr=p=>_s(ps(jn(p!=null?hs(bs(p)):{},"default",p&&p.__esModule&&"default"in p?{get:()=>p.default,enumerable:!0}:{value:p,enumerable:!0})),p);var Ln=ms((Cn,Rn)=>{(function(p,r){typeof Cn=="object"&&typeof Rn!="undefined"?Rn.exports=r():typeof define=="function"&&define.amd?define(r):p.chroma=r()})(Cn,function(){"use strict";for(var p=function(t,n,e){return n===void 0&&(n=0),e===void 0&&(e=1),t<n?n:t>e?e:t},r=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var n=0;n<=3;n++)n<3?((t[n]<0||t[n]>255)&&(t._clipped=!0),t[n]=p(t[n],0,255)):n===3&&(t[n]=p(t[n],0,1));return t},a={},i=0,s=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<s.length;i+=1){var c=s[i];a["[object "+c+"]"]=c.toLowerCase()}var l=function(t){return a[Object.prototype.toString.call(t)]||"object"},u=function(t,n){return n===void 0&&(n=null),t.length>=3?Array.prototype.slice.call(t):l(t[0])=="object"&&n?n.split("").filter(function(e){return t[0][e]!==void 0}).map(function(e){return t[0][e]}):t[0]},v=function(t){if(t.length<2)return null;var n=t.length-1;return l(t[n])=="string"?t[n].toLowerCase():null},w=Math.PI,g={clip_rgb:r,limit:p,type:l,unpack:u,last:v,PI:w,TWOPI:w*2,PITHIRD:w/3,DEG2RAD:w/180,RAD2DEG:180/w},b={format:{},autodetect:[]},k=g.last,M=g.clip_rgb,T=g.type,E=function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];var o=this;if(T(n[0])==="object"&&n[0].constructor&&n[0].constructor===this.constructor)return n[0];var h=k(n),d=!1;if(!h){d=!0,b.sorted||(b.autodetect=b.autodetect.sort(function(I,A){return A.p-I.p}),b.sorted=!0);for(var f=0,m=b.autodetect;f<m.length;f+=1){var _=m[f];if(h=_.test.apply(_,n),h)break}}if(b.format[h]){var $=b.format[h].apply(null,d?n:n.slice(0,-1));o._rgb=M($)}else throw new Error("unknown format: "+n);o._rgb.length===3&&o._rgb.push(1)};E.prototype.toString=function(){return T(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var y=E,j=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(j.Color,[null].concat(t)))};j.Color=y,j.version="2.1.2";var F=j,V=g.unpack,K=Math.max,J=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=V(t,"rgb"),o=e[0],h=e[1],d=e[2];o=o/255,h=h/255,d=d/255;var f=1-K(o,K(h,d)),m=f<1?1/(1-f):0,_=(1-o-f)*m,$=(1-h-f)*m,I=(1-d-f)*m;return[_,$,I,f]},Q=J,ot=g.unpack,at=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];t=ot(t,"cmyk");var e=t[0],o=t[1],h=t[2],d=t[3],f=t.length>4?t[4]:1;return d===1?[0,0,0,f]:[e>=1?0:255*(1-e)*(1-d),o>=1?0:255*(1-o)*(1-d),h>=1?0:255*(1-h)*(1-d),f]},lt=at,R=g.unpack,G=g.type;y.prototype.cmyk=function(){return Q(this._rgb)},F.cmyk=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["cmyk"])))},b.format.cmyk=lt,b.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=R(t,"cmyk"),G(t)==="array"&&t.length===4)return"cmyk"}});var O=g.unpack,H=g.last,z=function(t){return Math.round(t*100)/100},pt=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=O(t,"hsla"),o=H(t)||"lsa";return e[0]=z(e[0]||0),e[1]=z(e[1]*100)+"%",e[2]=z(e[2]*100)+"%",o==="hsla"||e.length>3&&e[3]<1?(e[3]=e.length>3?e[3]:1,o="hsla"):e.length=3,o+"("+e.join(",")+")"},ft=pt,Y=g.unpack,ct=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];t=Y(t,"rgba");var e=t[0],o=t[1],h=t[2];e/=255,o/=255,h/=255;var d=Math.min(e,o,h),f=Math.max(e,o,h),m=(f+d)/2,_,$;return f===d?(_=0,$=Number.NaN):_=m<.5?(f-d)/(f+d):(f-d)/(2-f-d),e==f?$=(o-h)/(f-d):o==f?$=2+(h-e)/(f-d):h==f&&($=4+(e-o)/(f-d)),$*=60,$<0&&($+=360),t.length>3&&t[3]!==void 0?[$,_,m,t[3]]:[$,_,m]},Pt=ct,kt=g.unpack,Bt=g.last,Ut=Math.round,jr=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=kt(t,"rgba"),o=Bt(t)||"rgb";return o.substr(0,3)=="hsl"?ft(Pt(e),o):(e[0]=Ut(e[0]),e[1]=Ut(e[1]),e[2]=Ut(e[2]),(o==="rgba"||e.length>3&&e[3]<1)&&(e[3]=e.length>3?e[3]:1,o="rgba"),o+"("+e.slice(0,o==="rgb"?3:4).join(",")+")")},Cr=jr,Rr=g.unpack,un=Math.round,Lr=function(){for(var t,n=[],e=arguments.length;e--;)n[e]=arguments[e];n=Rr(n,"hsl");var o=n[0],h=n[1],d=n[2],f,m,_;if(h===0)f=m=_=d*255;else{var $=[0,0,0],I=[0,0,0],A=d<.5?d*(1+h):d+h-d*h,C=2*d-A,x=o/360;$[0]=x+1/3,$[1]=x,$[2]=x-1/3;for(var S=0;S<3;S++)$[S]<0&&($[S]+=1),$[S]>1&&($[S]-=1),6*$[S]<1?I[S]=C+(A-C)*6*$[S]:2*$[S]<1?I[S]=A:3*$[S]<2?I[S]=C+(A-C)*(2/3-$[S])*6:I[S]=C;t=[un(I[0]*255),un(I[1]*255),un(I[2]*255)],f=t[0],m=t[1],_=t[2]}return n.length>3?[f,m,_,n[3]]:[f,m,_,1]},hn=Lr,Dn=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,On=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,qn=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Hn=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Yn=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Xn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,Bn=Math.round,Un=function(t){t=t.toLowerCase().trim();var n;if(b.format.named)try{return b.format.named(t)}catch(S){}if(n=t.match(Dn)){for(var e=n.slice(1,4),o=0;o<3;o++)e[o]=+e[o];return e[3]=1,e}if(n=t.match(On)){for(var h=n.slice(1,5),d=0;d<4;d++)h[d]=+h[d];return h}if(n=t.match(qn)){for(var f=n.slice(1,4),m=0;m<3;m++)f[m]=Bn(f[m]*2.55);return f[3]=1,f}if(n=t.match(Hn)){for(var _=n.slice(1,5),$=0;$<3;$++)_[$]=Bn(_[$]*2.55);return _[3]=+_[3],_}if(n=t.match(Yn)){var I=n.slice(1,4);I[1]*=.01,I[2]*=.01;var A=hn(I);return A[3]=1,A}if(n=t.match(Xn)){var C=n.slice(1,4);C[1]*=.01,C[2]*=.01;var x=hn(C);return x[3]=+n[4],x}};Un.test=function(t){return Dn.test(t)||On.test(t)||qn.test(t)||Hn.test(t)||Yn.test(t)||Xn.test(t)};var Vn=Un,Sr=g.type;y.prototype.css=function(t){return Cr(this._rgb,t)},F.css=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["css"])))},b.format.css=Vn,b.autodetect.push({p:5,test:function(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];if(!n.length&&Sr(t)==="string"&&Vn.test(t))return"css"}});var Gr=g.unpack;b.format.gl=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=Gr(t,"rgba");return e[0]*=255,e[1]*=255,e[2]*=255,e},F.gl=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["gl"])))},y.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var Dr=g.unpack,Or=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=Dr(t,"rgb"),o=e[0],h=e[1],d=e[2],f=Math.min(o,h,d),m=Math.max(o,h,d),_=m-f,$=_*100/255,I=f/(255-_)*100,A;return _===0?A=Number.NaN:(o===m&&(A=(h-d)/_),h===m&&(A=2+(d-o)/_),d===m&&(A=4+(o-h)/_),A*=60,A<0&&(A+=360)),[A,$,I]},qr=Or,Hr=g.unpack,Yr=Math.floor,Xr=function(){for(var t,n,e,o,h,d,f=[],m=arguments.length;m--;)f[m]=arguments[m];f=Hr(f,"hcg");var _=f[0],$=f[1],I=f[2],A,C,x;I=I*255;var S=$*255;if($===0)A=C=x=I;else{_===360&&(_=0),_>360&&(_-=360),_<0&&(_+=360),_/=60;var X=Yr(_),D=_-X,Z=I*(1-$),rt=Z+S*(1-D),dt=Z+S*D,vt=Z+S;switch(X){case 0:t=[vt,dt,Z],A=t[0],C=t[1],x=t[2];break;case 1:n=[rt,vt,Z],A=n[0],C=n[1],x=n[2];break;case 2:e=[Z,vt,dt],A=e[0],C=e[1],x=e[2];break;case 3:o=[Z,rt,vt],A=o[0],C=o[1],x=o[2];break;case 4:h=[dt,Z,vt],A=h[0],C=h[1],x=h[2];break;case 5:d=[vt,Z,rt],A=d[0],C=d[1],x=d[2];break}}return[A,C,x,f.length>3?f[3]:1]},Br=Xr,Ur=g.unpack,Vr=g.type;y.prototype.hcg=function(){return qr(this._rgb)},F.hcg=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["hcg"])))},b.format.hcg=Br,b.autodetect.push({p:1,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=Ur(t,"hcg"),Vr(t)==="array"&&t.length===3)return"hcg"}});var Wr=g.unpack,Kr=g.last,tn=Math.round,Zr=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=Wr(t,"rgba"),o=e[0],h=e[1],d=e[2],f=e[3],m=Kr(t)||"auto";f===void 0&&(f=1),m==="auto"&&(m=f<1?"rgba":"rgb"),o=tn(o),h=tn(h),d=tn(d);var _=o<<16|h<<8|d,$="000000"+_.toString(16);$=$.substr($.length-6);var I="0"+tn(f*255).toString(16);switch(I=I.substr(I.length-2),m.toLowerCase()){case"rgba":return"#"+$+I;case"argb":return"#"+I+$;default:return"#"+$}},Wn=Zr,Qr=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,Jr=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,zr=function(t){if(t.match(Qr)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var n=parseInt(t,16),e=n>>16,o=n>>8&255,h=n&255;return[e,o,h,1]}if(t.match(Jr)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var d=parseInt(t,16),f=d>>24&255,m=d>>16&255,_=d>>8&255,$=Math.round((d&255)/255*100)/100;return[f,m,_,$]}throw new Error("unknown hex color: "+t)},Kn=zr,te=g.type;y.prototype.hex=function(t){return Wn(this._rgb,t)},F.hex=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["hex"])))},b.format.hex=Kn,b.autodetect.push({p:4,test:function(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];if(!n.length&&te(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var ne=g.unpack,Zn=g.TWOPI,re=Math.min,ee=Math.sqrt,ae=Math.acos,se=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=ne(t,"rgb"),o=e[0],h=e[1],d=e[2];o/=255,h/=255,d/=255;var f,m=re(o,h,d),_=(o+h+d)/3,$=_>0?1-m/_:0;return $===0?f=NaN:(f=(o-h+(o-d))/2,f/=ee((o-h)*(o-h)+(o-d)*(h-d)),f=ae(f),d>h&&(f=Zn-f),f/=Zn),[f*360,$,_]},ie=se,oe=g.unpack,dn=g.limit,Ct=g.TWOPI,vn=g.PITHIRD,Rt=Math.cos,le=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];t=oe(t,"hsi");var e=t[0],o=t[1],h=t[2],d,f,m;return isNaN(e)&&(e=0),isNaN(o)&&(o=0),e>360&&(e-=360),e<0&&(e+=360),e/=360,e<1/3?(m=(1-o)/3,d=(1+o*Rt(Ct*e)/Rt(vn-Ct*e))/3,f=1-(m+d)):e<2/3?(e-=1/3,d=(1-o)/3,f=(1+o*Rt(Ct*e)/Rt(vn-Ct*e))/3,m=1-(d+f)):(e-=2/3,f=(1-o)/3,m=(1+o*Rt(Ct*e)/Rt(vn-Ct*e))/3,d=1-(f+m)),d=dn(h*d*3),f=dn(h*f*3),m=dn(h*m*3),[d*255,f*255,m*255,t.length>3?t[3]:1]},ce=le,fe=g.unpack,ue=g.type;y.prototype.hsi=function(){return ie(this._rgb)},F.hsi=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["hsi"])))},b.format.hsi=ce,b.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=fe(t,"hsi"),ue(t)==="array"&&t.length===3)return"hsi"}});var he=g.unpack,de=g.type;y.prototype.hsl=function(){return Pt(this._rgb)},F.hsl=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["hsl"])))},b.format.hsl=hn,b.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=he(t,"hsl"),de(t)==="array"&&t.length===3)return"hsl"}});var ve=g.unpack,be=Math.min,ge=Math.max,pe=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];t=ve(t,"rgb");var e=t[0],o=t[1],h=t[2],d=be(e,o,h),f=ge(e,o,h),m=f-d,_,$,I;return I=f/255,f===0?(_=Number.NaN,$=0):($=m/f,e===f&&(_=(o-h)/m),o===f&&(_=2+(h-e)/m),h===f&&(_=4+(e-o)/m),_*=60,_<0&&(_+=360)),[_,$,I]},me=pe,_e=g.unpack,we=Math.floor,ye=function(){for(var t,n,e,o,h,d,f=[],m=arguments.length;m--;)f[m]=arguments[m];f=_e(f,"hsv");var _=f[0],$=f[1],I=f[2],A,C,x;if(I*=255,$===0)A=C=x=I;else{_===360&&(_=0),_>360&&(_-=360),_<0&&(_+=360),_/=60;var S=we(_),X=_-S,D=I*(1-$),Z=I*(1-$*X),rt=I*(1-$*(1-X));switch(S){case 0:t=[I,rt,D],A=t[0],C=t[1],x=t[2];break;case 1:n=[Z,I,D],A=n[0],C=n[1],x=n[2];break;case 2:e=[D,I,rt],A=e[0],C=e[1],x=e[2];break;case 3:o=[D,Z,I],A=o[0],C=o[1],x=o[2];break;case 4:h=[rt,D,I],A=h[0],C=h[1],x=h[2];break;case 5:d=[I,D,Z],A=d[0],C=d[1],x=d[2];break}}return[A,C,x,f.length>3?f[3]:1]},ke=ye,Me=g.unpack,$e=g.type;y.prototype.hsv=function(){return me(this._rgb)},F.hsv=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["hsv"])))},b.format.hsv=ke,b.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=Me(t,"hsv"),$e(t)==="array"&&t.length===3)return"hsv"}});var mt={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},Pe=g.unpack,Qn=Math.pow,Ae=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=Pe(t,"rgb"),o=e[0],h=e[1],d=e[2],f=Fe(o,h,d),m=f[0],_=f[1],$=f[2],I=116*_-16;return[I<0?0:I,500*(m-_),200*(_-$)]},bn=function(t){return(t/=255)<=.04045?t/12.92:Qn((t+.055)/1.055,2.4)},gn=function(t){return t>mt.t3?Qn(t,1/3):t/mt.t2+mt.t0},Fe=function(t,n,e){t=bn(t),n=bn(n),e=bn(e);var o=gn((.4124564*t+.3575761*n+.1804375*e)/mt.Xn),h=gn((.2126729*t+.7151522*n+.072175*e)/mt.Yn),d=gn((.0193339*t+.119192*n+.9503041*e)/mt.Zn);return[o,h,d]},Jn=Ae,Ie=g.unpack,Ne=Math.pow,Te=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];t=Ie(t,"lab");var e=t[0],o=t[1],h=t[2],d,f,m,_,$,I;return f=(e+16)/116,d=isNaN(o)?f:f+o/500,m=isNaN(h)?f:f-h/200,f=mt.Yn*mn(f),d=mt.Xn*mn(d),m=mt.Zn*mn(m),_=pn(3.2404542*d-1.5371385*f-.4985314*m),$=pn(-.969266*d+1.8760108*f+.041556*m),I=pn(.0556434*d-.2040259*f+1.0572252*m),[_,$,I,t.length>3?t[3]:1]},pn=function(t){return 255*(t<=.00304?12.92*t:1.055*Ne(t,1/2.4)-.055)},mn=function(t){return t>mt.t1?t*t*t:mt.t2*(t-mt.t0)},zn=Te,Ee=g.unpack,xe=g.type;y.prototype.lab=function(){return Jn(this._rgb)},F.lab=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["lab"])))},b.format.lab=zn,b.autodetect.push({p:2,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=Ee(t,"lab"),xe(t)==="array"&&t.length===3)return"lab"}});var je=g.unpack,Ce=g.RAD2DEG,Re=Math.sqrt,Le=Math.atan2,Se=Math.round,Ge=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=je(t,"lab"),o=e[0],h=e[1],d=e[2],f=Re(h*h+d*d),m=(Le(d,h)*Ce+360)%360;return Se(f*1e4)===0&&(m=Number.NaN),[o,f,m]},De=Ge,Oe=g.unpack,qe=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=Oe(t,"rgb"),o=e[0],h=e[1],d=e[2],f=Jn(o,h,d),m=f[0],_=f[1],$=f[2];return De(m,_,$)},tr=qe,He=g.unpack,Ye=g.DEG2RAD,Xe=Math.sin,Be=Math.cos,Ue=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=He(t,"lch"),o=e[0],h=e[1],d=e[2];return isNaN(d)&&(d=0),d=d*Ye,[o,Be(d)*h,Xe(d)*h]},Ve=Ue,We=g.unpack,Ke=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];t=We(t,"lch");var e=t[0],o=t[1],h=t[2],d=Ve(e,o,h),f=d[0],m=d[1],_=d[2],$=zn(f,m,_),I=$[0],A=$[1],C=$[2];return[I,A,C,t.length>3?t[3]:1]},nr=Ke,Ze=g.unpack,Qe=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=Ze(t,"hcl").reverse();return nr.apply(void 0,e)},Je=Qe,ze=g.unpack,ta=g.type;y.prototype.lch=function(){return tr(this._rgb)},y.prototype.hcl=function(){return tr(this._rgb).reverse()},F.lch=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["lch"])))},F.hcl=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["hcl"])))},b.format.lch=nr,b.format.hcl=Je,["lch","hcl"].forEach(function(t){return b.autodetect.push({p:2,test:function(){for(var n=[],e=arguments.length;e--;)n[e]=arguments[e];if(n=ze(n,t),ta(n)==="array"&&n.length===3)return t}})});var na={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Lt=na,ra=g.type;y.prototype.name=function(){for(var t=Wn(this._rgb,"rgb"),n=0,e=Object.keys(Lt);n<e.length;n+=1){var o=e[n];if(Lt[o]===t)return o.toLowerCase()}return t},b.format.named=function(t){if(t=t.toLowerCase(),Lt[t])return Kn(Lt[t]);throw new Error("unknown color name: "+t)},b.autodetect.push({p:5,test:function(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];if(!n.length&&ra(t)==="string"&&Lt[t.toLowerCase()])return"named"}});var ea=g.unpack,aa=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=ea(t,"rgb"),o=e[0],h=e[1],d=e[2];return(o<<16)+(h<<8)+d},sa=aa,ia=g.type,oa=function(t){if(ia(t)=="number"&&t>=0&&t<=16777215){var n=t>>16,e=t>>8&255,o=t&255;return[n,e,o,1]}throw new Error("unknown num color: "+t)},la=oa,ca=g.type;y.prototype.num=function(){return sa(this._rgb)},F.num=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["num"])))},b.format.num=la,b.autodetect.push({p:5,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t.length===1&&ca(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});var rr=g.unpack,er=g.type,ar=Math.round;y.prototype.rgb=function(t){return t===void 0&&(t=!0),t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ar)},y.prototype.rgba=function(t){return t===void 0&&(t=!0),this._rgb.slice(0,4).map(function(n,e){return e<3?t===!1?n:ar(n):n})},F.rgb=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["rgb"])))},b.format.rgb=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var e=rr(t,"rgba");return e[3]===void 0&&(e[3]=1),e},b.autodetect.push({p:3,test:function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];if(t=rr(t,"rgba"),er(t)==="array"&&(t.length===3||t.length===4&&er(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});var nn=Math.log,fa=function(t){var n=t/100,e,o,h;return n<66?(e=255,o=-155.25485562709179-.44596950469579133*(o=n-2)+104.49216199393888*nn(o),h=n<20?0:-254.76935184120902+.8274096064007395*(h=n-10)+115.67994401066147*nn(h)):(e=351.97690566805693+.114206453784165*(e=n-55)-40.25366309332127*nn(e),o=325.4494125711974+.07943456536662342*(o=n-50)-28.0852963507957*nn(o),h=255),[e,o,h,1]},sr=fa,ua=g.unpack,ha=Math.round,da=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var e=ua(t,"rgb"),o=e[0],h=e[2],d=1e3,f=4e4,m=.4,_;f-d>m;){_=(f+d)*.5;var $=sr(_);$[2]/$[0]>=h/o?f=_:d=_}return ha(_)},va=da;y.prototype.temp=y.prototype.kelvin=y.prototype.temperature=function(){return va(this._rgb)},F.temp=F.kelvin=F.temperature=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return new(Function.prototype.bind.apply(y,[null].concat(t,["temp"])))},b.format.temp=b.format.kelvin=b.format.temperature=sr;var ba=g.type;y.prototype.alpha=function(t,n){return n===void 0&&(n=!1),t!==void 0&&ba(t)==="number"?n?(this._rgb[3]=t,this):new y([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},y.prototype.clipped=function(){return this._rgb._clipped||!1},y.prototype.darken=function(t){t===void 0&&(t=1);var n=this,e=n.lab();return e[0]-=mt.Kn*t,new y(e,"lab").alpha(n.alpha(),!0)},y.prototype.brighten=function(t){return t===void 0&&(t=1),this.darken(-t)},y.prototype.darker=y.prototype.darken,y.prototype.brighter=y.prototype.brighten,y.prototype.get=function(t){var n=t.split("."),e=n[0],o=n[1],h=this[e]();if(o){var d=e.indexOf(o);if(d>-1)return h[d];throw new Error("unknown channel "+o+" in mode "+e)}else return h};var ga=g.type,pa=Math.pow,ma=1e-7,_a=20;y.prototype.luminance=function(t){if(t!==void 0&&ga(t)==="number"){if(t===0)return new y([0,0,0,this._rgb[3]],"rgb");if(t===1)return new y([255,255,255,this._rgb[3]],"rgb");var n=this.luminance(),e="rgb",o=_a,h=function(f,m){var _=f.interpolate(m,.5,e),$=_.luminance();return Math.abs(t-$)<ma||!o--?_:$>t?h(f,_):h(_,m)},d=(n>t?h(new y([0,0,0]),this):h(this,new y([255,255,255]))).rgb();return new y(d.concat([this._rgb[3]]))}return wa.apply(void 0,this._rgb.slice(0,3))};var wa=function(t,n,e){return t=_n(t),n=_n(n),e=_n(e),.2126*t+.7152*n+.0722*e},_n=function(t){return t/=255,t<=.03928?t/12.92:pa((t+.055)/1.055,2.4)},_t={},ir=g.type,or=function(t,n,e){e===void 0&&(e=.5);for(var o=[],h=arguments.length-3;h-- >0;)o[h]=arguments[h+3];var d=o[0]||"lrgb";if(!_t[d]&&!o.length&&(d=Object.keys(_t)[0]),!_t[d])throw new Error("interpolation mode "+d+" is not defined");return ir(t)!=="object"&&(t=new y(t)),ir(n)!=="object"&&(n=new y(n)),_t[d](t,n,e).alpha(t.alpha()+e*(n.alpha()-t.alpha()))};y.prototype.mix=y.prototype.interpolate=function(t,n){n===void 0&&(n=.5);for(var e=[],o=arguments.length-2;o-- >0;)e[o]=arguments[o+2];return or.apply(void 0,[this,t,n].concat(e))},y.prototype.premultiply=function(t){t===void 0&&(t=!1);var n=this._rgb,e=n[3];return t?(this._rgb=[n[0]*e,n[1]*e,n[2]*e,e],this):new y([n[0]*e,n[1]*e,n[2]*e,e],"rgb")},y.prototype.saturate=function(t){t===void 0&&(t=1);var n=this,e=n.lch();return e[1]+=mt.Kn*t,e[1]<0&&(e[1]=0),new y(e,"lch").alpha(n.alpha(),!0)},y.prototype.desaturate=function(t){return t===void 0&&(t=1),this.saturate(-t)};var lr=g.type;y.prototype.set=function(t,n,e){e===void 0&&(e=!1);var o=t.split("."),h=o[0],d=o[1],f=this[h]();if(d){var m=h.indexOf(d);if(m>-1){if(lr(n)=="string")switch(n.charAt(0)){case"+":f[m]+=+n;break;case"-":f[m]+=+n;break;case"*":f[m]*=+n.substr(1);break;case"/":f[m]/=+n.substr(1);break;default:f[m]=+n}else if(lr(n)==="number")f[m]=n;else throw new Error("unsupported value for Color.set");var _=new y(f,h);return e?(this._rgb=_._rgb,this):_}throw new Error("unknown channel "+d+" in mode "+h)}else return f};var ya=function(t,n,e){var o=t._rgb,h=n._rgb;return new y(o[0]+e*(h[0]-o[0]),o[1]+e*(h[1]-o[1]),o[2]+e*(h[2]-o[2]),"rgb")};_t.rgb=ya;var wn=Math.sqrt,St=Math.pow,ka=function(t,n,e){var o=t._rgb,h=o[0],d=o[1],f=o[2],m=n._rgb,_=m[0],$=m[1],I=m[2];return new y(wn(St(h,2)*(1-e)+St(_,2)*e),wn(St(d,2)*(1-e)+St($,2)*e),wn(St(f,2)*(1-e)+St(I,2)*e),"rgb")};_t.lrgb=ka;var Ma=function(t,n,e){var o=t.lab(),h=n.lab();return new y(o[0]+e*(h[0]-o[0]),o[1]+e*(h[1]-o[1]),o[2]+e*(h[2]-o[2]),"lab")};_t.lab=Ma;var Vt=function(t,n,e,o){var h,d,f,m;o==="hsl"?(f=t.hsl(),m=n.hsl()):o==="hsv"?(f=t.hsv(),m=n.hsv()):o==="hcg"?(f=t.hcg(),m=n.hcg()):o==="hsi"?(f=t.hsi(),m=n.hsi()):(o==="lch"||o==="hcl")&&(o="hcl",f=t.hcl(),m=n.hcl());var _,$,I,A,C,x;o.substr(0,1)==="h"&&(h=f,_=h[0],I=h[1],C=h[2],d=m,$=d[0],A=d[1],x=d[2]);var S,X,D,Z;return!isNaN(_)&&!isNaN($)?($>_&&$-_>180?Z=$-(_+360):$<_&&_-$>180?Z=$+360-_:Z=$-_,X=_+e*Z):isNaN(_)?isNaN($)?X=Number.NaN:(X=$,(C==1||C==0)&&o!="hsv"&&(S=A)):(X=_,(x==1||x==0)&&o!="hsv"&&(S=I)),S===void 0&&(S=I+e*(A-I)),D=C+e*(x-C),new y([X,S,D],o)},cr=function(t,n,e){return Vt(t,n,e,"lch")};_t.lch=cr,_t.hcl=cr;var $a=function(t,n,e){var o=t.num(),h=n.num();return new y(o+e*(h-o),"num")};_t.num=$a;var Pa=function(t,n,e){return Vt(t,n,e,"hcg")};_t.hcg=Pa;var Aa=function(t,n,e){return Vt(t,n,e,"hsi")};_t.hsi=Aa;var Fa=function(t,n,e){return Vt(t,n,e,"hsl")};_t.hsl=Fa;var Ia=function(t,n,e){return Vt(t,n,e,"hsv")};_t.hsv=Ia;var Na=g.clip_rgb,yn=Math.pow,kn=Math.sqrt,Mn=Math.PI,fr=Math.cos,ur=Math.sin,Ta=Math.atan2,Ea=function(t,n,e){n===void 0&&(n="lrgb"),e===void 0&&(e=null);var o=t.length;e||(e=Array.from(new Array(o)).map(function(){return 1}));var h=o/e.reduce(function(X,D){return X+D});if(e.forEach(function(X,D){e[D]*=h}),t=t.map(function(X){return new y(X)}),n==="lrgb")return xa(t,e);for(var d=t.shift(),f=d.get(n),m=[],_=0,$=0,I=0;I<f.length;I++)if(f[I]=(f[I]||0)*e[0],m.push(isNaN(f[I])?0:e[0]),n.charAt(I)==="h"&&!isNaN(f[I])){var A=f[I]/180*Mn;_+=fr(A)*e[0],$+=ur(A)*e[0]}var C=d.alpha()*e[0];t.forEach(function(X,D){var Z=X.get(n);C+=X.alpha()*e[D+1];for(var rt=0;rt<f.length;rt++)if(!isNaN(Z[rt]))if(m[rt]+=e[D+1],n.charAt(rt)==="h"){var dt=Z[rt]/180*Mn;_+=fr(dt)*e[D+1],$+=ur(dt)*e[D+1]}else f[rt]+=Z[rt]*e[D+1]});for(var x=0;x<f.length;x++)if(n.charAt(x)==="h"){for(var S=Ta($/m[x],_/m[x])/Mn*180;S<0;)S+=360;for(;S>=360;)S-=360;f[x]=S}else f[x]=f[x]/m[x];return C/=o,new y(f,n).alpha(C>.99999?1:C,!0)},xa=function(t,n){for(var e=t.length,o=[0,0,0,0],h=0;h<t.length;h++){var d=t[h],f=n[h]/e,m=d._rgb;o[0]+=yn(m[0],2)*f,o[1]+=yn(m[1],2)*f,o[2]+=yn(m[2],2)*f,o[3]+=m[3]*f}return o[0]=kn(o[0]),o[1]=kn(o[1]),o[2]=kn(o[2]),o[3]>.9999999&&(o[3]=1),new y(Na(o))},Gt=g.type,ja=Math.pow,rn=function(t){var n="rgb",e=F("#ccc"),o=0,h=[0,1],d=[],f=[0,0],m=!1,_=[],$=!1,I=0,A=1,C=!1,x={},S=!0,X=1,D=function(N){if(N=N||["#fff","#000"],N&&Gt(N)==="string"&&F.brewer&&F.brewer[N.toLowerCase()]&&(N=F.brewer[N.toLowerCase()]),Gt(N)==="array"){N.length===1&&(N=[N[0],N[0]]),N=N.slice(0);for(var L=0;L<N.length;L++)N[L]=F(N[L]);d.length=0;for(var B=0;B<N.length;B++)d.push(B/(N.length-1))}return yt(),_=N},Z=function(N){if(m!=null){for(var L=m.length-1,B=0;B<L&&N>=m[B];)B++;return B-1}return 0},rt=function(N){return N},dt=function(N){return N},vt=function(N,L){var B,q;if(L==null&&(L=!1),isNaN(N)||N===null)return e;if(L)q=N;else if(m&&m.length>2){var wt=Z(N);q=wt/(m.length-2)}else A!==I?q=(N-I)/(A-I):q=1;q=dt(q),L||(q=rt(q)),X!==1&&(q=ja(q,X)),q=f[0]+q*(1-f[0]-f[1]),q=Math.min(1,Math.max(0,q));var st=Math.floor(q*1e4);if(S&&x[st])B=x[st];else{if(Gt(_)==="array")for(var tt=0;tt<d.length;tt++){var nt=d[tt];if(q<=nt){B=_[tt];break}if(q>=nt&&tt===d.length-1){B=_[tt];break}if(q>nt&&q<d[tt+1]){q=(q-nt)/(d[tt+1]-nt),B=F.interpolate(_[tt],_[tt+1],q,n);break}}else Gt(_)==="function"&&(B=_(q));S&&(x[st]=B)}return B},yt=function(){return x={}};D(t);var U=function(N){var L=F(vt(N));return $&&L[$]?L[$]():L};return U.classes=function(N){if(N!=null){if(Gt(N)==="array")m=N,h=[N[0],N[N.length-1]];else{var L=F.analyze(h);N===0?m=[L.min,L.max]:m=F.limits(L,"e",N)}return U}return m},U.domain=function(N){if(!arguments.length)return h;I=N[0],A=N[N.length-1],d=[];var L=_.length;if(N.length===L&&I!==A)for(var B=0,q=Array.from(N);B<q.length;B+=1){var wt=q[B];d.push((wt-I)/(A-I))}else{for(var st=0;st<L;st++)d.push(st/(L-1));if(N.length>2){var tt=N.map(function(ut,et){return et/(N.length-1)}),nt=N.map(function(ut){return(ut-I)/(A-I)});nt.every(function(ut,et){return tt[et]===ut})||(dt=function(ut){if(ut<=0||ut>=1)return ut;for(var et=0;ut>=nt[et+1];)et++;var It=(ut-nt[et])/(nt[et+1]-nt[et]),Dt=tt[et]+It*(tt[et+1]-tt[et]);return Dt})}}return h=[I,A],U},U.mode=function(N){return arguments.length?(n=N,yt(),U):n},U.range=function(N,L){return D(N,L),U},U.out=function(N){return $=N,U},U.spread=function(N){return arguments.length?(o=N,U):o},U.correctLightness=function(N){return N==null&&(N=!0),C=N,yt(),C?rt=function(L){for(var B=vt(0,!0).lab()[0],q=vt(1,!0).lab()[0],wt=B>q,st=vt(L,!0).lab()[0],tt=B+(q-B)*L,nt=st-tt,ut=0,et=1,It=20;Math.abs(nt)>.01&&It-- >0;)(function(){return wt&&(nt*=-1),nt<0?(ut=L,L+=(et-L)*.5):(et=L,L+=(ut-L)*.5),st=vt(L,!0).lab()[0],nt=st-tt})();return L}:rt=function(L){return L},U},U.padding=function(N){return N!=null?(Gt(N)==="number"&&(N=[N,N]),f=N,U):f},U.colors=function(N,L){arguments.length<2&&(L="hex");var B=[];if(arguments.length===0)B=_.slice(0);else if(N===1)B=[U(.5)];else if(N>1){var q=h[0],wt=h[1]-q;B=Ca(0,N,!1).map(function(et){return U(q+et/(N-1)*wt)})}else{t=[];var st=[];if(m&&m.length>2)for(var tt=1,nt=m.length,ut=1<=nt;ut?tt<nt:tt>nt;ut?tt++:tt--)st.push((m[tt-1]+m[tt])*.5);else st=h;B=st.map(function(et){return U(et)})}return F[L]&&(B=B.map(function(et){return et[L]()})),B},U.cache=function(N){return N!=null?(S=N,U):S},U.gamma=function(N){return N!=null?(X=N,U):X},U.nodata=function(N){return N!=null?(e=F(N),U):e},U};function Ca(t,n,e){for(var o=[],h=t<n,d=e?h?n+1:n-1:n,f=t;h?f<d:f>d;h?f++:f--)o.push(f);return o}var $n=function(t){var n,e,o,h,d,f,m;if(t=t.map(function(A){return new y(A)}),t.length===2)n=t.map(function(A){return A.lab()}),d=n[0],f=n[1],h=function(A){var C=[0,1,2].map(function(x){return d[x]+A*(f[x]-d[x])});return new y(C,"lab")};else if(t.length===3)e=t.map(function(A){return A.lab()}),d=e[0],f=e[1],m=e[2],h=function(A){var C=[0,1,2].map(function(x){return(1-A)*(1-A)*d[x]+2*(1-A)*A*f[x]+A*A*m[x]});return new y(C,"lab")};else if(t.length===4){var _;o=t.map(function(A){return A.lab()}),d=o[0],f=o[1],m=o[2],_=o[3],h=function(A){var C=[0,1,2].map(function(x){return(1-A)*(1-A)*(1-A)*d[x]+3*(1-A)*(1-A)*A*f[x]+3*(1-A)*A*A*m[x]+A*A*A*_[x]});return new y(C,"lab")}}else if(t.length===5){var $=$n(t.slice(0,3)),I=$n(t.slice(2,5));h=function(A){return A<.5?$(A*2):I((A-.5)*2)}}return h},Ra=function(t){var n=$n(t);return n.scale=function(){return rn(n)},n},Mt=function(t,n,e){if(!Mt[e])throw new Error("unknown blend mode "+e);return Mt[e](t,n)},At=function(t){return function(n,e){var o=F(e).rgb(),h=F(n).rgb();return F.rgb(t(o,h))}},Ft=function(t){return function(n,e){var o=[];return o[0]=t(n[0],e[0]),o[1]=t(n[1],e[1]),o[2]=t(n[2],e[2]),o}},La=function(t){return t},Sa=function(t,n){return t*n/255},Ga=function(t,n){return t>n?n:t},Da=function(t,n){return t>n?t:n},Oa=function(t,n){return 255*(1-(1-t/255)*(1-n/255))},qa=function(t,n){return n<128?2*t*n/255:255*(1-2*(1-t/255)*(1-n/255))},Ha=function(t,n){return 255*(1-(1-n/255)/(t/255))},Ya=function(t,n){return t===255?255:(t=255*(n/255)/(1-t/255),t>255?255:t)};Mt.normal=At(Ft(La)),Mt.multiply=At(Ft(Sa)),Mt.screen=At(Ft(Oa)),Mt.overlay=At(Ft(qa)),Mt.darken=At(Ft(Ga)),Mt.lighten=At(Ft(Da)),Mt.dodge=At(Ft(Ya)),Mt.burn=At(Ft(Ha));for(var Xa=Mt,Pn=g.type,Ba=g.clip_rgb,Ua=g.TWOPI,Va=Math.pow,Wa=Math.sin,Ka=Math.cos,Za=function(t,n,e,o,h){t===void 0&&(t=300),n===void 0&&(n=-1.5),e===void 0&&(e=1),o===void 0&&(o=1),h===void 0&&(h=[0,1]);var d=0,f;Pn(h)==="array"?f=h[1]-h[0]:(f=0,h=[h,h]);var m=function(_){var $=Ua*((t+120)/360+n*_),I=Va(h[0]+f*_,o),A=d!==0?e[0]+_*d:e,C=A*I*(1-I)/2,x=Ka($),S=Wa($),X=I+C*(-.14861*x+1.78277*S),D=I+C*(-.29227*x-.90649*S),Z=I+C*(1.97294*x);return F(Ba([X*255,D*255,Z*255,1]))};return m.start=function(_){return _==null?t:(t=_,m)},m.rotations=function(_){return _==null?n:(n=_,m)},m.gamma=function(_){return _==null?o:(o=_,m)},m.hue=function(_){return _==null?e:(e=_,Pn(e)==="array"?(d=e[1]-e[0],d===0&&(e=e[1])):d=0,m)},m.lightness=function(_){return _==null?h:(Pn(_)==="array"?(h=_,f=_[1]-_[0]):(h=[_,_],f=0),m)},m.scale=function(){return F.scale(m)},m.hue(e),m},Qa="0123456789abcdef",Ja=Math.floor,za=Math.random,ts=function(){for(var t="#",n=0;n<6;n++)t+=Qa.charAt(Ja(za()*16));return new y(t,"hex")},hr=Math.log,ns=Math.pow,rs=Math.floor,es=Math.abs,dr=function(t,n){n===void 0&&(n=null);var e={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return l(t)==="object"&&(t=Object.values(t)),t.forEach(function(o){n&&l(o)==="object"&&(o=o[n]),o!=null&&!isNaN(o)&&(e.values.push(o),e.sum+=o,o<e.min&&(e.min=o),o>e.max&&(e.max=o),e.count+=1)}),e.domain=[e.min,e.max],e.limits=function(o,h){return vr(e,o,h)},e},vr=function(t,n,e){n===void 0&&(n="equal"),e===void 0&&(e=7),l(t)=="array"&&(t=dr(t));var o=t.min,h=t.max,d=t.values.sort(function(En,xn){return En-xn});if(e===1)return[o,h];var f=[];if(n.substr(0,1)==="c"&&(f.push(o),f.push(h)),n.substr(0,1)==="e"){f.push(o);for(var m=1;m<e;m++)f.push(o+m/e*(h-o));f.push(h)}else if(n.substr(0,1)==="l"){if(o<=0)throw new Error("Logarithmic scales are only possible for values > 0");var _=Math.LOG10E*hr(o),$=Math.LOG10E*hr(h);f.push(o);for(var I=1;I<e;I++)f.push(ns(10,_+I/e*($-_)));f.push(h)}else if(n.substr(0,1)==="q"){f.push(o);for(var A=1;A<e;A++){var C=(d.length-1)*A/e,x=rs(C);if(x===C)f.push(d[x]);else{var S=C-x;f.push(d[x]*(1-S)+d[x+1]*S)}}f.push(h)}else if(n.substr(0,1)==="k"){var X,D=d.length,Z=new Array(D),rt=new Array(e),dt=!0,vt=0,yt=null;yt=[],yt.push(o);for(var U=1;U<e;U++)yt.push(o+U/e*(h-o));for(yt.push(h);dt;){for(var N=0;N<e;N++)rt[N]=0;for(var L=0;L<D;L++)for(var B=d[L],q=Number.MAX_VALUE,wt=void 0,st=0;st<e;st++){var tt=es(yt[st]-B);tt<q&&(q=tt,wt=st),rt[wt]++,Z[L]=wt}for(var nt=new Array(e),ut=0;ut<e;ut++)nt[ut]=null;for(var et=0;et<D;et++)X=Z[et],nt[X]===null?nt[X]=d[et]:nt[X]+=d[et];for(var It=0;It<e;It++)nt[It]*=1/rt[It];dt=!1;for(var Dt=0;Dt<e;Dt++)if(nt[Dt]!==yt[Dt]){dt=!0;break}yt=nt,vt++,vt>200&&(dt=!1)}for(var Wt={},In=0;In<e;In++)Wt[In]=[];for(var sn=0;sn<D;sn++)X=Z[sn],Wt[X].push(d[sn]);for(var Tt=[],Kt=0;Kt<e;Kt++)Tt.push(Wt[Kt][0]),Tt.push(Wt[Kt][Wt[Kt].length-1]);Tt=Tt.sort(function(En,xn){return En-xn}),f.push(Tt[0]);for(var Nn=1;Nn<Tt.length;Nn+=2){var Tn=Tt[Nn];!isNaN(Tn)&&f.indexOf(Tn)===-1&&f.push(Tn)}}return f},br={analyze:dr,limits:vr},as=function(t,n){t=new y(t),n=new y(n);var e=t.luminance(),o=n.luminance();return e>o?(e+.05)/(o+.05):(o+.05)/(e+.05)},en=Math.sqrt,ss=Math.atan2,gr=Math.abs,pr=Math.cos,An=Math.PI,is=function(t,n,e,o){e===void 0&&(e=1),o===void 0&&(o=1),t=new y(t),n=new y(n);for(var h=Array.from(t.lab()),d=h[0],f=h[1],m=h[2],_=Array.from(n.lab()),$=_[0],I=_[1],A=_[2],C=en(f*f+m*m),x=en(I*I+A*A),S=d<16?.511:.040975*d/(1+.01765*d),X=.0638*C/(1+.0131*C)+.638,D=C<1e-6?0:ss(m,f)*180/An;D<0;)D+=360;for(;D>=360;)D-=360;var Z=D>=164&&D<=345?.56+gr(.2*pr(An*(D+168)/180)):.36+gr(.4*pr(An*(D+35)/180)),rt=C*C*C*C,dt=en(rt/(rt+1900)),vt=X*(dt*Z+1-dt),yt=d-$,U=C-x,N=f-I,L=m-A,B=N*N+L*L-U*U,q=yt/(e*S),wt=U/(o*X),st=vt;return en(q*q+wt*wt+B/(st*st))},os=function(t,n,e){e===void 0&&(e="lab"),t=new y(t),n=new y(n);var o=t.get(e),h=n.get(e),d=0;for(var f in o){var m=(o[f]||0)-(h[f]||0);d+=m*m}return Math.sqrt(d)},ls=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];try{return new(Function.prototype.bind.apply(y,[null].concat(t))),!0}catch(e){return!1}},cs={cool:function(){return rn([F.hsl(180,1,.9),F.hsl(250,.7,.4)])},hot:function(){return rn(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")}},an={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Fn=0,mr=Object.keys(an);Fn<mr.length;Fn+=1){var _r=mr[Fn];an[_r.toLowerCase()]=an[_r]}var fs=an;F.average=Ea,F.bezier=Ra,F.blend=Xa,F.cubehelix=Za,F.mix=F.interpolate=or,F.random=ts,F.scale=rn,F.analyze=br.analyze,F.contrast=as,F.deltaE=is,F.distance=os,F.limits=br.limits,F.valid=ls,F.scales=cs,F.colors=Lt,F.brewer=fs;var us=F;return us})});function bt(p,r){p<0&&(p=0),r<0&&(r=0),p>r&&([p,r]=[r,p]);let a=r-p,i=Math.floor(Math.random()*(a+1));return p+i}var on=class{static random(r,a,i){switch(bt(1,2)){case 1:return this.uniform(r,a,i);case 2:default:return this.grid(r,a,i)}}static uniform(r,a,i){r<0&&(r=0),a<0&&(a=0),(i==null||i<=0)&&(i=yr(r,a));let s=Math.max(Math.min(r,a)/2,i),c=r+2*s,l=a+2*s,u=Math.ceil(l/i),v=Math.ceil(c/i),w=u*v,g=[];for(let b=0;b<w;b++){let k=Math.round(Math.random()*c-s),M=Math.round(Math.random()*l-s);g.push([k,M])}return g}static grid(r,a,i,s){r<0&&(r=0),a<0&&(a=0),s<0?s=0:s>1?s=1:s==null&&(s=Math.random()),(i==null||i<=0)&&(i=yr(r,a));let c=Math.max(Math.min(r,a)/2,i),[l,u]=[-c,r+c],[v,w]=[-c,a+c],g=()=>{let k=Math.round(Math.random()),M=Math.round(Math.random()*i*s);return k===1?M:-M},b=[];for(let k=l;k<=u;k+=i)for(let M=v;M<=w;M+=i)b.push([k+g(),M+g()]);return b}};function yr(p,r){let a=Math.min(p,r),i=Math.min(a,50),s=Math.floor(a/5);return bt(i,s)}var it=wr(Ln());var ln=class{static random(r){switch(bt(1,7)){case 1:return this.chaos(r);case 2:return this.complementary(r);case 3:return this.monochromatic(r);case 4:return this.analogous(r);case 5:return this.triadic(r);case 6:return this.tetradic(r);case 7:default:return this.colorbrewer()}}static chaos(r){let i=[Ot(r)],s=bt(4,10);for(let c=1;c<4;c++)i.push(ws(i[c-1]));return it.default.scale(i).mode("lch").colors(s)}static complementary(r){let a=Ot(r),[i,s,c]=a.hsl(),l=it.default.hsl(i-180,s,c),u=bt(4,10);return it.default.scale([a,l]).mode("lch").colors(u)}static monochromatic(r){let a=Ot(r),[i,s,c]=a.hsl(),l=bt(4,10),u=1/(l+1),v=[];for(let w=l;w>=1;w--)v.push(it.default.hsl(i,s,w*u).hex());return v}static analogous(r){let a=Ot(r),[i,s,c]=a.hsl(),l=it.default.hsl(i+30,s,c),u=it.default.hsl(i+60,s,c),v=bt(4,10);return it.default.scale([a,l,u]).mode("lch").colors(v)}static triadic(r){let a=Ot(r),[i,s,c]=a.hsl(),l=it.default.hsl(i+120,s,c),u=it.default.hsl(i+240,s,c),v=bt(4,10);return it.default.scale([a,l,u]).mode("lch").colors(v)}static tetradic(r){let a=Ot(r),[i,s,c]=a.hsl(),l=it.default.hsl(i+90,s,c),u=it.default.hsl(i+180,s,c),v=it.default.hsl(i+270,s,c),w=bt(4,10);return it.default.scale([a,l,u,v]).mode("lch").colors(w)}static colorbrewer(r){let a=Object.keys(it.default.brewer);if(r!=null&&r in a)return it.default.brewer[r];{let i=Math.floor(Math.random()*a.length);return it.default.brewer[a[i]]}}};function Ot(p){return it.default.valid(p)?(0,it.default)(p):it.default.random()}function ws(p){if(p==null)return it.default.random();let r=bt(1,3),[a,i,s]=p.hsl();switch(r){case 1:a=bt(1,360);case 2:i=Math.random();case 3:default:s=Math.random()}return it.default.hsl(a,i,s)}var zt=wr(Ln());var W=11102230246251565e-32,ht=134217729,Zt=(3+8*W)*W;function Et(p,r,a,i,s){let c,l,u,v,w=r[0],g=i[0],b=0,k=0;g>w==g>-w?(c=w,w=r[++b]):(c=g,g=i[++k]);let M=0;if(b<p&&k<a)for(g>w==g>-w?(l=w+c,u=c-(l-w),w=r[++b]):(l=g+c,u=c-(l-g),g=i[++k]),c=l,u!==0&&(s[M++]=u);b<p&&k<a;)g>w==g>-w?(l=c+w,v=l-c,u=c-(l-v)+(w-v),w=r[++b]):(l=c+g,v=l-c,u=c-(l-v)+(g-v),g=i[++k]),c=l,u!==0&&(s[M++]=u);for(;b<p;)l=c+w,v=l-c,u=c-(l-v)+(w-v),w=r[++b],c=l,u!==0&&(s[M++]=u);for(;k<a;)l=c+g,v=l-c,u=c-(l-v)+(g-v),g=i[++k],c=l,u!==0&&(s[M++]=u);return(c!==0||M===0)&&(s[M++]=c),M}function Qt(p,r){let a=r[0];for(let i=1;i<p;i++)a+=r[i];return a}function P(p){return new Float64Array(p)}var ys=(3+16*W)*W,ks=(2+12*W)*W,Ms=(9+64*W)*W*W,qt=P(4),kr=P(8),Mr=P(12),$r=P(16),gt=P(4);function $s(p,r,a,i,s,c,l){let u,v,w,g,b,k,M,T,E,y,j,F,V,K,J,Q,ot,at,lt=p-s,R=a-s,G=r-c,O=i-c;K=lt*O,k=ht*lt,M=k-(k-lt),T=lt-M,k=ht*O,E=k-(k-O),y=O-E,J=T*y-(K-M*E-T*E-M*y),Q=G*R,k=ht*G,M=k-(k-G),T=G-M,k=ht*R,E=k-(k-R),y=R-E,ot=T*y-(Q-M*E-T*E-M*y),j=J-ot,b=J-j,qt[0]=J-(j+b)+(b-ot),F=K+j,b=F-K,V=K-(F-b)+(j-b),j=V-Q,b=V-j,qt[1]=V-(j+b)+(b-Q),at=F+j,b=at-F,qt[2]=F-(at-b)+(j-b),qt[3]=at;let H=Qt(4,qt),z=ks*l;if(H>=z||-H>=z||(b=p-lt,u=p-(lt+b)+(b-s),b=a-R,w=a-(R+b)+(b-s),b=r-G,v=r-(G+b)+(b-c),b=i-O,g=i-(O+b)+(b-c),u===0&&v===0&&w===0&&g===0)||(z=Ms*l+Zt*Math.abs(H),H+=lt*g+O*u-(G*w+R*v),H>=z||-H>=z))return H;K=u*O,k=ht*u,M=k-(k-u),T=u-M,k=ht*O,E=k-(k-O),y=O-E,J=T*y-(K-M*E-T*E-M*y),Q=v*R,k=ht*v,M=k-(k-v),T=v-M,k=ht*R,E=k-(k-R),y=R-E,ot=T*y-(Q-M*E-T*E-M*y),j=J-ot,b=J-j,gt[0]=J-(j+b)+(b-ot),F=K+j,b=F-K,V=K-(F-b)+(j-b),j=V-Q,b=V-j,gt[1]=V-(j+b)+(b-Q),at=F+j,b=at-F,gt[2]=F-(at-b)+(j-b),gt[3]=at;let pt=Et(4,qt,4,gt,kr);K=lt*g,k=ht*lt,M=k-(k-lt),T=lt-M,k=ht*g,E=k-(k-g),y=g-E,J=T*y-(K-M*E-T*E-M*y),Q=G*w,k=ht*G,M=k-(k-G),T=G-M,k=ht*w,E=k-(k-w),y=w-E,ot=T*y-(Q-M*E-T*E-M*y),j=J-ot,b=J-j,gt[0]=J-(j+b)+(b-ot),F=K+j,b=F-K,V=K-(F-b)+(j-b),j=V-Q,b=V-j,gt[1]=V-(j+b)+(b-Q),at=F+j,b=at-F,gt[2]=F-(at-b)+(j-b),gt[3]=at;let ft=Et(pt,kr,4,gt,Mr);K=u*g,k=ht*u,M=k-(k-u),T=u-M,k=ht*g,E=k-(k-g),y=g-E,J=T*y-(K-M*E-T*E-M*y),Q=v*w,k=ht*v,M=k-(k-v),T=v-M,k=ht*w,E=k-(k-w),y=w-E,ot=T*y-(Q-M*E-T*E-M*y),j=J-ot,b=J-j,gt[0]=J-(j+b)+(b-ot),F=K+j,b=F-K,V=K-(F-b)+(j-b),j=V-Q,b=V-j,gt[1]=V-(j+b)+(b-Q),at=F+j,b=at-F,gt[2]=F-(at-b)+(j-b),gt[3]=at;let Y=Et(ft,Mr,4,gt,$r);return $r[Y-1]}function Ht(p,r,a,i,s,c){let l=(r-c)*(a-s),u=(p-s)*(i-c),v=l-u;if(l===0||u===0||l>0!=u>0)return v;let w=Math.abs(l+u);return Math.abs(v)>=ys*w?v:-$s(p,r,a,i,s,c,w)}var Qs=(7+56*W)*W,Js=(3+28*W)*W,zs=(26+288*W)*W*W,ti=P(4),ni=P(4),ri=P(4),ei=P(4),ai=P(4),si=P(4),ii=P(4),oi=P(4),li=P(4),ci=P(8),fi=P(8),ui=P(8),hi=P(4),di=P(8),vi=P(8),bi=P(8),gi=P(12),pi=P(192),mi=P(192);var yi=(10+96*W)*W,ki=(4+48*W)*W,Mi=(44+576*W)*W*W,$i=P(4),Pi=P(4),Ai=P(4),Fi=P(4),Ii=P(4),Ni=P(4),Ti=P(4),Ei=P(4),xi=P(8),ji=P(8),Ci=P(8),Ri=P(8),Li=P(8),Si=P(8),Gi=P(8),Di=P(8),Oi=P(8),qi=P(4),Hi=P(4),Yi=P(4),Xi=P(8),Bi=P(16),Ui=P(16),Vi=P(16),Wi=P(32),Ki=P(32),Zi=P(48),Qi=P(64),Ji=P(1152),zi=P(1152);var eo=(16+224*W)*W,ao=(5+72*W)*W,so=(71+1408*W)*W*W,io=P(4),oo=P(4),lo=P(4),co=P(4),fo=P(4),uo=P(4),ho=P(4),vo=P(4),bo=P(4),go=P(4),po=P(24),mo=P(24),_o=P(24),wo=P(24),yo=P(24),ko=P(24),Mo=P(24),$o=P(24),Po=P(24),Ao=P(24),Fo=P(1152),Io=P(1152),No=P(1152),To=P(1152),Eo=P(1152),xo=P(2304),jo=P(2304),Co=P(3456),Ro=P(5760),Lo=P(8),So=P(8),Go=P(8),Do=P(16),Oo=P(24),qo=P(48),Ho=P(48),Yo=P(96),Xo=P(192),Bo=P(384),Uo=P(384),Vo=P(384),Wo=P(768);var Ko=P(96),Zo=P(96),Qo=P(96),Jo=P(1152);var Ar=Math.pow(2,-52),cn=new Uint32Array(512),xt=class{static from(r,a=Ts,i=Es){let s=r.length,c=new Float64Array(s*2);for(let l=0;l<s;l++){let u=r[l];c[2*l]=a(u),c[2*l+1]=i(u)}return new xt(c)}constructor(r){let a=r.length>>1;if(a>0&&typeof r[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=r;let i=Math.max(2*a-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(a)),this._hullPrev=new Uint32Array(a),this._hullNext=new Uint32Array(a),this._hullTri=new Uint32Array(a),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(a),this._dists=new Float64Array(a),this.update()}update(){let{coords:r,_hullPrev:a,_hullNext:i,_hullTri:s,_hullHash:c}=this,l=r.length>>1,u=1/0,v=1/0,w=-1/0,g=-1/0;for(let R=0;R<l;R++){let G=r[2*R],O=r[2*R+1];G<u&&(u=G),O<v&&(v=O),G>w&&(w=G),O>g&&(g=O),this._ids[R]=R}let b=(u+w)/2,k=(v+g)/2,M=1/0,T,E,y;for(let R=0;R<l;R++){let G=Sn(b,k,r[2*R],r[2*R+1]);G<M&&(T=R,M=G)}let j=r[2*T],F=r[2*T+1];M=1/0;for(let R=0;R<l;R++){if(R===T)continue;let G=Sn(j,F,r[2*R],r[2*R+1]);G<M&&G>0&&(E=R,M=G)}let V=r[2*E],K=r[2*E+1],J=1/0;for(let R=0;R<l;R++){if(R===T||R===E)continue;let G=Is(j,F,V,K,r[2*R],r[2*R+1]);G<J&&(y=R,J=G)}let Q=r[2*y],ot=r[2*y+1];if(J===1/0){for(let O=0;O<l;O++)this._dists[O]=r[2*O]-r[0]||r[2*O+1]-r[1];Yt(this._ids,this._dists,0,l-1);let R=new Uint32Array(l),G=0;for(let O=0,H=-1/0;O<l;O++){let z=this._ids[O];this._dists[z]>H&&(R[G++]=z,H=this._dists[z])}this.hull=R.subarray(0,G),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Ht(j,F,V,K,Q,ot)<0){let R=E,G=V,O=K;E=y,V=Q,K=ot,y=R,Q=G,ot=O}let at=Ns(j,F,V,K,Q,ot);this._cx=at.x,this._cy=at.y;for(let R=0;R<l;R++)this._dists[R]=Sn(r[2*R],r[2*R+1],at.x,at.y);Yt(this._ids,this._dists,0,l-1),this._hullStart=T;let lt=3;i[T]=a[y]=E,i[E]=a[T]=y,i[y]=a[E]=T,s[T]=0,s[E]=1,s[y]=2,c.fill(-1),c[this._hashKey(j,F)]=T,c[this._hashKey(V,K)]=E,c[this._hashKey(Q,ot)]=y,this.trianglesLen=0,this._addTriangle(T,E,y,-1,-1,-1);for(let R=0,G,O;R<this._ids.length;R++){let H=this._ids[R],z=r[2*H],pt=r[2*H+1];if(R>0&&Math.abs(z-G)<=Ar&&Math.abs(pt-O)<=Ar||(G=z,O=pt,H===T||H===E||H===y))continue;let ft=0;for(let Bt=0,Ut=this._hashKey(z,pt);Bt<this._hashSize&&(ft=c[(Ut+Bt)%this._hashSize],!(ft!==-1&&ft!==i[ft]));Bt++);ft=a[ft];let Y=ft,ct;for(;ct=i[Y],Ht(z,pt,r[2*Y],r[2*Y+1],r[2*ct],r[2*ct+1])>=0;)if(Y=ct,Y===ft){Y=-1;break}if(Y===-1)continue;let Pt=this._addTriangle(Y,H,i[Y],-1,-1,s[Y]);s[H]=this._legalize(Pt+2),s[Y]=Pt,lt++;let kt=i[Y];for(;ct=i[kt],Ht(z,pt,r[2*kt],r[2*kt+1],r[2*ct],r[2*ct+1])<0;)Pt=this._addTriangle(kt,H,ct,s[H],-1,s[kt]),s[H]=this._legalize(Pt+2),i[kt]=kt,lt--,kt=ct;if(Y===ft)for(;ct=a[Y],Ht(z,pt,r[2*ct],r[2*ct+1],r[2*Y],r[2*Y+1])<0;)Pt=this._addTriangle(ct,H,Y,-1,s[Y],s[ct]),this._legalize(Pt+2),s[ct]=Pt,i[Y]=Y,lt--,Y=ct;this._hullStart=a[H]=Y,i[Y]=a[kt]=H,i[H]=kt,c[this._hashKey(z,pt)]=H,c[this._hashKey(r[2*Y],r[2*Y+1])]=Y}this.hull=new Uint32Array(lt);for(let R=0,G=this._hullStart;R<lt;R++)this.hull[R]=G,G=i[G];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(r,a){return Math.floor(As(r-this._cx,a-this._cy)*this._hashSize)%this._hashSize}_legalize(r){let{_triangles:a,_halfedges:i,coords:s}=this,c=0,l=0;for(;;){let u=i[r],v=r-r%3;if(l=v+(r+2)%3,u===-1){if(c===0)break;r=cn[--c];continue}let w=u-u%3,g=v+(r+1)%3,b=w+(u+2)%3,k=a[l],M=a[r],T=a[g],E=a[b];if(Fs(s[2*k],s[2*k+1],s[2*M],s[2*M+1],s[2*T],s[2*T+1],s[2*E],s[2*E+1])){a[r]=E,a[u]=k;let j=i[b];if(j===-1){let V=this._hullStart;do{if(this._hullTri[V]===b){this._hullTri[V]=r;break}V=this._hullPrev[V]}while(V!==this._hullStart)}this._link(r,j),this._link(u,i[l]),this._link(l,b);let F=w+(u+1)%3;c<cn.length&&(cn[c++]=F)}else{if(c===0)break;r=cn[--c]}}return l}_link(r,a){this._halfedges[r]=a,a!==-1&&(this._halfedges[a]=r)}_addTriangle(r,a,i,s,c,l){let u=this.trianglesLen;return this._triangles[u]=r,this._triangles[u+1]=a,this._triangles[u+2]=i,this._link(u,s),this._link(u+1,c),this._link(u+2,l),this.trianglesLen+=3,u}};function As(p,r){let a=p/(Math.abs(p)+Math.abs(r));return(r>0?3-a:1+a)/4}function Sn(p,r,a,i){let s=p-a,c=r-i;return s*s+c*c}function Fs(p,r,a,i,s,c,l,u){let v=p-l,w=r-u,g=a-l,b=i-u,k=s-l,M=c-u,T=v*v+w*w,E=g*g+b*b,y=k*k+M*M;return v*(b*y-E*M)-w*(g*y-E*k)+T*(g*M-b*k)<0}function Is(p,r,a,i,s,c){let l=a-p,u=i-r,v=s-p,w=c-r,g=l*l+u*u,b=v*v+w*w,k=.5/(l*w-u*v),M=(w*g-u*b)*k,T=(l*b-v*g)*k;return M*M+T*T}function Ns(p,r,a,i,s,c){let l=a-p,u=i-r,v=s-p,w=c-r,g=l*l+u*u,b=v*v+w*w,k=.5/(l*w-u*v),M=p+(w*g-u*b)*k,T=r+(l*b-v*g)*k;return{x:M,y:T}}function Yt(p,r,a,i){if(i-a<=20)for(let s=a+1;s<=i;s++){let c=p[s],l=r[c],u=s-1;for(;u>=a&&r[p[u]]>l;)p[u+1]=p[u--];p[u+1]=c}else{let s=a+i>>1,c=a+1,l=i;Jt(p,s,c),r[p[a]]>r[p[i]]&&Jt(p,a,i),r[p[c]]>r[p[i]]&&Jt(p,c,i),r[p[a]]>r[p[c]]&&Jt(p,a,c);let u=p[c],v=r[u];for(;;){do c++;while(r[p[c]]<v);do l--;while(r[p[l]]>v);if(l<c)break;Jt(p,c,l)}p[a+1]=p[l],p[l]=u,i-c+1>=l-a?(Yt(p,r,c,i),Yt(p,r,a,l-1)):(Yt(p,r,a,l-1),Yt(p,r,c,i))}}function Jt(p,r,a){let i=p[r];p[r]=p[a],p[a]=i}function Ts(p){return p[0]}function Es(p){return p[1]}var Fr=1e-6,$t=class{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(r,a){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(r,a){this._+=`L${this._x1=+r},${this._y1=+a}`}arc(r,a,i){r=+r,a=+a,i=+i;let s=r+i,c=a;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${s},${c}`:(Math.abs(this._x1-s)>Fr||Math.abs(this._y1-c)>Fr)&&(this._+="L"+s+","+c),!!i&&(this._+=`A${i},${i},0,1,1,${r-i},${a}A${i},${i},0,1,1,${this._x1=s},${this._y1=c}`)}rect(r,a,i,s){this._+=`M${this._x0=this._x1=+r},${this._y0=this._y1=+a}h${+i}v${+s}h${-i}Z`}value(){return this._||null}};var jt=class{constructor(){this._=[]}moveTo(r,a){this._.push([r,a])}closePath(){this._.push(this._[0].slice())}lineTo(r,a){this._.push([r,a])}value(){return this._.length?this._:null}};var fn=class{constructor(r,[a,i,s,c]=[0,0,960,500]){if(!((s=+s)>=(a=+a))||!((c=+c)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=r,this._circumcenters=new Float64Array(r.points.length*2),this.vectors=new Float64Array(r.points.length*2),this.xmax=s,this.xmin=a,this.ymax=c,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){let{delaunay:{points:r,hull:a,triangles:i},vectors:s}=this,c=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let M=0,T=0,E=i.length,y,j;M<E;M+=3,T+=2){let F=i[M]*2,V=i[M+1]*2,K=i[M+2]*2,J=r[F],Q=r[F+1],ot=r[V],at=r[V+1],lt=r[K],R=r[K+1],G=ot-J,O=at-Q,H=lt-J,z=R-Q,pt=(G*z-O*H)*2;if(Math.abs(pt)<1e-9){let ft=1e9,Y=i[0]*2;ft*=Math.sign((r[Y]-J)*z-(r[Y+1]-Q)*H),y=(J+lt)/2-ft*z,j=(Q+R)/2+ft*H}else{let ft=1/pt,Y=G*G+O*O,ct=H*H+z*z;y=J+(z*Y-O*ct)*ft,j=Q+(G*ct-H*Y)*ft}c[T]=y,c[T+1]=j}let l=a[a.length-1],u,v=l*4,w,g=r[2*l],b,k=r[2*l+1];s.fill(0);for(let M=0;M<a.length;++M)l=a[M],u=v,w=g,b=k,v=l*4,g=r[2*l],k=r[2*l+1],s[u+2]=s[v]=b-k,s[u+3]=s[v+1]=g-w}render(r){let a=r==null?r=new $t:void 0,{delaunay:{halfedges:i,inedges:s,hull:c},circumcenters:l,vectors:u}=this;if(c.length<=1)return null;for(let g=0,b=i.length;g<b;++g){let k=i[g];if(k<g)continue;let M=Math.floor(g/3)*2,T=Math.floor(k/3)*2,E=l[M],y=l[M+1],j=l[T],F=l[T+1];this._renderSegment(E,y,j,F,r)}let v,w=c[c.length-1];for(let g=0;g<c.length;++g){v=w,w=c[g];let b=Math.floor(s[w]/3)*2,k=l[b],M=l[b+1],T=v*4,E=this._project(k,M,u[T+2],u[T+3]);E&&this._renderSegment(k,M,E[0],E[1],r)}return a&&a.value()}renderBounds(r){let a=r==null?r=new $t:void 0;return r.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),a&&a.value()}renderCell(r,a){let i=a==null?a=new $t:void 0,s=this._clip(r);if(s===null||!s.length)return;a.moveTo(s[0],s[1]);let c=s.length;for(;s[0]===s[c-2]&&s[1]===s[c-1]&&c>1;)c-=2;for(let l=2;l<c;l+=2)(s[l]!==s[l-2]||s[l+1]!==s[l-1])&&a.lineTo(s[l],s[l+1]);return a.closePath(),i&&i.value()}*cellPolygons(){let{delaunay:{points:r}}=this;for(let a=0,i=r.length/2;a<i;++a){let s=this.cellPolygon(a);s&&(s.index=a,yield s)}}cellPolygon(r){let a=new jt;return this.renderCell(r,a),a.value()}_renderSegment(r,a,i,s,c){let l,u=this._regioncode(r,a),v=this._regioncode(i,s);u===0&&v===0?(c.moveTo(r,a),c.lineTo(i,s)):(l=this._clipSegment(r,a,i,s,u,v))&&(c.moveTo(l[0],l[1]),c.lineTo(l[2],l[3]))}contains(r,a,i){return a=+a,a!==a||(i=+i,i!==i)?!1:this.delaunay._step(r,a,i)===r}*neighbors(r){let a=this._clip(r);if(a)for(let i of this.delaunay.neighbors(r)){let s=this._clip(i);if(s)t:for(let c=0,l=a.length;c<l;c+=2)for(let u=0,v=s.length;u<v;u+=2)if(a[c]==s[u]&&a[c+1]==s[u+1]&&a[(c+2)%l]==s[(u+v-2)%v]&&a[(c+3)%l]==s[(u+v-1)%v]){yield i;break t}}}_cell(r){let{circumcenters:a,delaunay:{inedges:i,halfedges:s,triangles:c}}=this,l=i[r];if(l===-1)return null;let u=[],v=l;do{let w=Math.floor(v/3);if(u.push(a[w*2],a[w*2+1]),v=v%3==2?v-2:v+1,c[v]!==r)break;v=s[v]}while(v!==l&&v!==-1);return u}_clip(r){if(r===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];let a=this._cell(r);if(a===null)return null;let{vectors:i}=this,s=r*4;return i[s]||i[s+1]?this._clipInfinite(r,a,i[s],i[s+1],i[s+2],i[s+3]):this._clipFinite(r,a)}_clipFinite(r,a){let i=a.length,s=null,c,l,u=a[i-2],v=a[i-1],w,g=this._regioncode(u,v),b,k=0;for(let M=0;M<i;M+=2)if(c=u,l=v,u=a[M],v=a[M+1],w=g,g=this._regioncode(u,v),w===0&&g===0)b=k,k=0,s?s.push(u,v):s=[u,v];else{let T,E,y,j,F;if(w===0){if((T=this._clipSegment(c,l,u,v,w,g))===null)continue;[E,y,j,F]=T}else{if((T=this._clipSegment(u,v,c,l,g,w))===null)continue;[j,F,E,y]=T,b=k,k=this._edgecode(E,y),b&&k&&this._edge(r,b,k,s,s.length),s?s.push(E,y):s=[E,y]}b=k,k=this._edgecode(j,F),b&&k&&this._edge(r,b,k,s,s.length),s?s.push(j,F):s=[j,F]}if(s)b=k,k=this._edgecode(s[0],s[1]),b&&k&&this._edge(r,b,k,s,s.length);else if(this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return s}_clipSegment(r,a,i,s,c,l){for(;;){if(c===0&&l===0)return[r,a,i,s];if(c&l)return null;let u,v,w=c||l;w&8?(u=r+(i-r)*(this.ymax-a)/(s-a),v=this.ymax):w&4?(u=r+(i-r)*(this.ymin-a)/(s-a),v=this.ymin):w&2?(v=a+(s-a)*(this.xmax-r)/(i-r),u=this.xmax):(v=a+(s-a)*(this.xmin-r)/(i-r),u=this.xmin),c?(r=u,a=v,c=this._regioncode(r,a)):(i=u,s=v,l=this._regioncode(i,s))}}_clipInfinite(r,a,i,s,c,l){let u=Array.from(a),v;if((v=this._project(u[0],u[1],i,s))&&u.unshift(v[0],v[1]),(v=this._project(u[u.length-2],u[u.length-1],c,l))&&u.push(v[0],v[1]),u=this._clipFinite(r,u))for(let w=0,g=u.length,b,k=this._edgecode(u[g-2],u[g-1]);w<g;w+=2)b=k,k=this._edgecode(u[w],u[w+1]),b&&k&&(w=this._edge(r,b,k,u,w),g=u.length);else this.contains(r,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(r,a,i,s,c){for(;a!==i;){let l,u;switch(a){case 5:a=4;continue;case 4:a=6,l=this.xmax,u=this.ymin;break;case 6:a=2;continue;case 2:a=10,l=this.xmax,u=this.ymax;break;case 10:a=8;continue;case 8:a=9,l=this.xmin,u=this.ymax;break;case 9:a=1;continue;case 1:a=5,l=this.xmin,u=this.ymin;break}(s[c]!==l||s[c+1]!==u)&&this.contains(r,l,u)&&(s.splice(c,0,l,u),c+=2)}if(s.length>4)for(let l=0;l<s.length;l+=2){let u=(l+2)%s.length,v=(l+4)%s.length;(s[l]===s[u]&&s[u]===s[v]||s[l+1]===s[u+1]&&s[u+1]===s[v+1])&&(s.splice(u,2),l-=2)}return c}_project(r,a,i,s){let c=1/0,l,u,v;if(s<0){if(a<=this.ymin)return null;(l=(this.ymin-a)/s)<c&&(v=this.ymin,u=r+(c=l)*i)}else if(s>0){if(a>=this.ymax)return null;(l=(this.ymax-a)/s)<c&&(v=this.ymax,u=r+(c=l)*i)}if(i>0){if(r>=this.xmax)return null;(l=(this.xmax-r)/i)<c&&(u=this.xmax,v=a+(c=l)*s)}else if(i<0){if(r<=this.xmin)return null;(l=(this.xmin-r)/i)<c&&(u=this.xmin,v=a+(c=l)*s)}return[u,v]}_edgecode(r,a){return(r===this.xmin?1:r===this.xmax?2:0)|(a===this.ymin?4:a===this.ymax?8:0)}_regioncode(r,a){return(r<this.xmin?1:r>this.xmax?2:0)|(a<this.ymin?4:a>this.ymax?8:0)}};var xs=2*Math.PI,Xt=Math.pow;function js(p){return p[0]}function Cs(p){return p[1]}function Rs(p){let{triangles:r,coords:a}=p;for(let i=0;i<r.length;i+=3){let s=2*r[i],c=2*r[i+1],l=2*r[i+2];if((a[l]-a[s])*(a[c+1]-a[s+1])-(a[c]-a[s])*(a[l+1]-a[s+1])>1e-10)return!1}return!0}function Ls(p,r,a){return[p+Math.sin(p+r)*a,r+Math.cos(p-r)*a]}var Nt=class{static from(r,a=js,i=Cs,s){return new Nt("length"in r?Ss(r,a,i,s):Float64Array.from(Gs(r,a,i,s)))}constructor(r){this._delaunator=new xt(r),this.inedges=new Int32Array(r.length/2),this._hullIndex=new Int32Array(r.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){let r=this._delaunator,a=this.points;if(r.hull&&r.hull.length>2&&Rs(r)){this.collinear=Int32Array.from({length:a.length/2},(k,M)=>M).sort((k,M)=>a[2*k]-a[2*M]||a[2*k+1]-a[2*M+1]);let v=this.collinear[0],w=this.collinear[this.collinear.length-1],g=[a[2*v],a[2*v+1],a[2*w],a[2*w+1]],b=1e-8*Math.hypot(g[3]-g[1],g[2]-g[0]);for(let k=0,M=a.length/2;k<M;++k){let T=Ls(a[2*k],a[2*k+1],b);a[2*k]=T[0],a[2*k+1]=T[1]}this._delaunator=new xt(a)}else delete this.collinear;let i=this.halfedges=this._delaunator.halfedges,s=this.hull=this._delaunator.hull,c=this.triangles=this._delaunator.triangles,l=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let v=0,w=i.length;v<w;++v){let g=c[v%3==2?v-2:v+1];(i[v]===-1||l[g]===-1)&&(l[g]=v)}for(let v=0,w=s.length;v<w;++v)u[s[v]]=v;s.length<=2&&s.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=s[0],l[s[0]]=1,s.length===2&&(l[s[1]]=0,this.triangles[1]=s[1],this.triangles[2]=s[1]))}voronoi(r){return new fn(this,r)}*neighbors(r){let{inedges:a,hull:i,_hullIndex:s,halfedges:c,triangles:l,collinear:u}=this;if(u){let b=u.indexOf(r);b>0&&(yield u[b-1]),b<u.length-1&&(yield u[b+1]);return}let v=a[r];if(v===-1)return;let w=v,g=-1;do{if(yield g=l[w],w=w%3==2?w-2:w+1,l[w]!==r)return;if(w=c[w],w===-1){let b=i[(s[r]+1)%i.length];b!==g&&(yield b);return}}while(w!==v)}find(r,a,i=0){if(r=+r,r!==r||(a=+a,a!==a))return-1;let s=i,c;for(;(c=this._step(i,r,a))>=0&&c!==i&&c!==s;)i=c;return c}_step(r,a,i){let{inedges:s,hull:c,_hullIndex:l,halfedges:u,triangles:v,points:w}=this;if(s[r]===-1||!w.length)return(r+1)%(w.length>>1);let g=r,b=Xt(a-w[r*2],2)+Xt(i-w[r*2+1],2),k=s[r],M=k;do{let T=v[M],E=Xt(a-w[T*2],2)+Xt(i-w[T*2+1],2);if(E<b&&(b=E,g=T),M=M%3==2?M-2:M+1,v[M]!==r)break;if(M=u[M],M===-1){if(M=c[(l[r]+1)%c.length],M!==T&&Xt(a-w[M*2],2)+Xt(i-w[M*2+1],2)<b)return M;break}}while(M!==k);return g}render(r){let a=r==null?r=new $t:void 0,{points:i,halfedges:s,triangles:c}=this;for(let l=0,u=s.length;l<u;++l){let v=s[l];if(v<l)continue;let w=c[l]*2,g=c[v]*2;r.moveTo(i[w],i[w+1]),r.lineTo(i[g],i[g+1])}return this.renderHull(r),a&&a.value()}renderPoints(r,a){a===void 0&&(!r||typeof r.moveTo!="function")&&(a=r,r=null),a=a==null?2:+a;let i=r==null?r=new $t:void 0,{points:s}=this;for(let c=0,l=s.length;c<l;c+=2){let u=s[c],v=s[c+1];r.moveTo(u+a,v),r.arc(u,v,a,0,xs)}return i&&i.value()}renderHull(r){let a=r==null?r=new $t:void 0,{hull:i,points:s}=this,c=i[0]*2,l=i.length;r.moveTo(s[c],s[c+1]);for(let u=1;u<l;++u){let v=2*i[u];r.lineTo(s[v],s[v+1])}return r.closePath(),a&&a.value()}hullPolygon(){let r=new jt;return this.renderHull(r),r.value()}renderTriangle(r,a){let i=a==null?a=new $t:void 0,{points:s,triangles:c}=this,l=c[r*=3]*2,u=c[r+1]*2,v=c[r+2]*2;return a.moveTo(s[l],s[l+1]),a.lineTo(s[u],s[u+1]),a.lineTo(s[v],s[v+1]),a.closePath(),i&&i.value()}*trianglePolygons(){let{triangles:r}=this;for(let a=0,i=r.length/3;a<i;++a)yield this.trianglePolygon(a)}trianglePolygon(r){let a=new jt;return this.renderTriangle(r,a),a.value()}};function Ss(p,r,a,i){let s=p.length,c=new Float64Array(s*2);for(let l=0;l<s;++l){let u=p[l];c[l*2]=r.call(i,u,l,p),c[l*2+1]=a.call(i,u,l,p)}return c}function*Gs(p,r,a,i){let s=0;for(let c of p)yield r.call(i,c,s,p),yield a.call(i,c,s,p),++s}var Gn=class{constructor(r={}){r=Ds(r),this.width=r.width,this.height=r.height,this.points=r.points,this.palette=r.palette}renderTriangle({lineWidth:r=2,gradientAngle:a=void 0}={}){Nr(a)||(a=bt(0,360)),a=Tr(a);let[i,s]=this._prepareCanvas(r,a);return s.fillRect(0,0,this.width,this.height),[...Nt.from(this.points).trianglePolygons()].forEach(l=>{if(!l.some(g=>{let[b,k]=[g[0],g[1]];return b>=0&&b<=this.width&&k>=0&&k<=this.height}))return;let v=(l[0][0]+l[1][0]+l[2][0])/3;v<=0?v=1:v>=this.width&&(v=this.width-1);let w=(l[0][1]+l[1][1]+l[2][1])/3;w<=0?w=1:w>=this.height&&(w=this.height-1),s.fillStyle=Er(s,v,w),xr(s,l),r>0&&s.stroke(),s.fill()}),i}renderVoronoi({lineWidth:r=2,gradientAngle:a=void 0}={}){Nr(a)||(a=bt(0,360)),a=Tr(a);let[i,s]=this._prepareCanvas(r,a);return s.fillRect(0,0,this.width,this.height),[...Nt.from(this.points).voronoi([0,0,this.width,this.height]).cellPolygons()].forEach(u=>{let[v,w]=[0,0],g=u.length-1;for(let M=0;M<g;M++)v+=u[M][0],w+=u[M][1];let b=v/g,k=w/g;s.fillStyle=Er(s,b,k),xr(s,u),r>0&&s.stroke(),s.fill()}),i}_createGradient(r,a,i){let{width:s,height:c}={...this};Ir(i)||(i=this.palette),a>180&&(a-=180);let[l,u]=[s/2,0],[v,w]=[s/2,c];if(a!==90){let k=Math.tan(a*Math.PI/180),M=s/2,T=c/2,[E,y]=[M,k*M];y>T?[E,y]=[T/k,T]:y<-T&&([E,y]=[-T/k,-T]),[v,w]=[Math.round(E+s/2),Math.round(y+c/2)],[l,u]=[s-v,c-w],k<0&&([l,v]=[v,l],[u,w]=[w,u])}let g=i.length,b=r.createLinearGradient(l,u,v,w);return i.forEach((k,M)=>{b.addColorStop(M/(g-1),k)}),b}_prepareCanvas(r,a){let i=document.createElement("canvas");i.width=this.width,i.height=this.height;let s=i.getContext("2d"),c=this._createGradient(s,a),l=zt.default.average(this.palette,"lch").luminance(),u=this.palette.map(w=>{let g=(0,zt.default)(w);return g=l>=.5?g.darken():g.brighten(),g.hex()}),v=this._createGradient(s,a,u);return s.lineWidth=r,s.fillStyle=c,s.strokeStyle=v,[i,s]}};function Ds(p={}){return typeof p.width!="number"&&(p.width=800),typeof p.height!="number"&&(p.height=600),Os(p.points)||(p.points=on.random(p.width,p.height)),Ir(p.palette)||(p.palette=ln.random()),p}function Os(p){return!Array.isArray(p)||p.length===0?!1:p.every(r=>Array.isArray(r)&&r.length===2&&isFinite(r[0])&&isFinite(r[1]))}function Ir(p){return!Array.isArray(p)||p.length<2?!1:p.every(r=>typeof r=="string"&&zt.default.valid(r))}function Nr(p){return typeof p=="number"&&isFinite(p)}function Tr(p){if(p<0){for(;p<0;)p+=360;return p}else if(p>360){for(;p>360;)p-=360;return p}else return p}function Er(p,r,a){let i=p.getImageData(r,a,1,1).data;return zt.default.rgb(i[0],i[1],i[2]).hex()}function xr(p,r){p.beginPath(),p.moveTo(r[0][0],r[0][1]);for(let a=1;a<r.length;a++)p.lineTo(r[a][0],r[a][1])}function Rl(p){return new Gn(p)}export{ln as Palette,Gn as Pattern,on as Points,Rl as default};
/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */
